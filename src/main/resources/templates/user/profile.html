<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/fragments.html :: head(title = 'Profile')">
    <meta charset="UTF-8">
    <!-- Required meta tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/81b9c5abe3.js" crossorigin="anonymous"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../static/css/custom.css">
    <title th:text="${title}"></title>
</head>
<body>
<th:block th:include="partials/fragments.html :: nav">
</th:block>

<div class="container page-content">
    <div>
        <h1 class="pt-2 pl-4" th:text="${user.getUsername()}">Charlie23</h1>

        <div class="d-flex justify-content-between">
            <div class="">
                <p class="mb-0 pl-4">PORTFOLIO VALUE: $<span
                        th:text="${#numbers.formatDecimal(portfolioValue + user.getBalance(), 0, 'DEFAULT', 2, 'DEFAULT')}">50</span></p>
            </div>
            <div class="pr-4 text-right d-inline-flex">
                <a class="pr-3" href="/profile/leaderboard"><h6>View Leaderboard</h6></a>
                <a href="/transactions/stock"><h6>View Stock Transactions</h6></a>
            </div>
        </div>

        <div class="container profile-stocks">
            <div class="row my-3">
                <div class="col">
                    <div class="p-0 mx-3 my-3 d-flex flex-column justify-content-center align-content-center">
                        <h4>STOCK VALUATION: $<span th:text="${#numbers.formatDecimal(portfolioValue, 0, 'DEFAULT', 2, 'DEFAULT')}">20</span></h4>
                        <h4>ACCOUNT BALANCE: $<span th:text="${#numbers.formatDecimal(user.getBalance(), 0, 'DEFAULT', 2, 'DEFAULT')}">35</span></h4>
                    </div>
                </div>
                <div class="col">

                </div>
            </div>
        </div>
    </div>
    <br>

    <div class="container">
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr class="text-center">
                        <th class="border-0">
                            <p class="mb-0">STOCKS OWNED</p>
                        </th>
                        <th class="border-0">
                            <p class="mb-0">TODAY</p>
                        </th>
                        <th class="border-0">
                            <p class="mb-0">SHARES</p>
                        </th>
                    </tr>
                </thead>
                <tbody class="dropdown-row">
                    <th:block th:each="userStock : ${userStocks}">
                        <th:block th:if="${userStock.getShares() > 0}">
                            <tr class="stock-row text-center table-stocks"
                                th:id="${userStock.getStock().getName()}">
                                <td class="border-0" th:text="${userStock.getStock().getName()}">Sample Company</td>
                                <td class="border-0"><span
                                        th:text="${#numbers.formatDecimal(userStock.getStock().getChange(), 0, 'DEFAULT', 2, 'DEFAULT')}">3.25</span>%
                                </td>
                                <td class="border-0" th:text="${userStock.getShares()}">4</td>
                            </tr>
                            <tr class="stock-row-stats" style="display: none">
                                <td colspan="3" class="border-0">
                                    <div class="row mx-3 d-flex justify-content-around div-stats">
                                        <div class="col d-flex align-content-center flex-column text-center">
                                            <p class="mb-0 stat-title">OPEN</p>
                                            <p>$<span th:text="${userStock.getStock().getOpenPrice()}">40</span></p>

                                            <p class="mb-0 stat-title">HIGH</p>
                                            <p>$<span th:text="${userStock.getStock().getHighPrice()}">34</span></p>

                                            <p class="mb-0 stat-title">LOW</p>
                                            <p class="mb-0">$<span th:text="${userStock.getStock().getLowPrice()}">50</span></p>
                                        </div>
                                        <div class="col d-flex align-content-center flex-column text-center">
                                            <p class="mb-0 stat-title">AVG COST</p>
                                            <p>$<span>Need to UPDATE</span></p>

                                            <p class="mb-0 stat-title">CURR MKT</p>
                                            <p>$<span th:text="${userStock.getStock().getMarketPrice()}">50</span></p>

                                            <p class="mb-0 pb-0 stat-title">Price Per Share</p>
                                            <p class="mb-0">$<span>Need to fix</span></p>
                                        </div>
                                    </div>
<!--                                    <ul style="display: none">-->

<!--                                        <div class="d-inline-flex justify-content-center">-->
<!--                                            <ul class="profile-stock-stats">-->
<!--                                                <li>Open: $<span th:text="${userStock.getStock().getOpenPrice()}">40</span></li>-->
<!--                                                <li>High: $<span th:text="${userStock.getStock().getHighPrice()}">34</span></li>-->
<!--                                                <li>Low: $<span th:text="${userStock.getStock().getLowPrice()}">50</span></li>-->
<!--                                            </ul>-->
<!--                                            <ul class="profile-stock-stats">-->
<!--                                                <li>Your Avg. Purchase Price:-->
<!--                                                    $<span>Need to UPDATE</span></li>-->
<!--                                                <li>Current Market Price: $<span-->
<!--                                                        th:text="${userStock.getStock().getMarketPrice()}">50</span></li>-->
<!--                                                <li>Total Return Per Sale: $<span>Need to fix</span></li>-->
<!--                                            </ul>-->
<!--                                        </div>-->

<!--                                    </ul>-->
                                </td>
                            </tr>
                        </th:block>
                    </th:block>
                </tbody>
            </table>
        </div>
    </div>
</div>

<footer th:replace="partials/fragments.html :: footer">
</footer>
<th:block th:include="partials/fragments.html :: scripts">
</th:block>
<script type="text/javascript" th:src="@{/js/profile.js}" src="../../static/js/profile.js"></script>

</body>
</html>